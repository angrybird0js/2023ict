{"ast":null,"code":"var _jsxFileName = \"/Users/hongseonghyeon/lab_readbook/2023ict/bprj/src/pages/Mypage/index.jsx\",\n  _s = $RefreshSig$();\n// localstorage 에 보관된 토큰을 프론트에서 전달받아 DB 조회\n// user, bookId\n// 사용자와 구독한 책 목록(컴포넌트)\n// 반납기능 추가\n//\n\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Header from \"../components/Header\";\nimport Booklist from \"../../components/Booklist\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MyPage = () => {\n  _s();\n  // 오류처리 try catch\n  // const mytoken = window.localstorage.getItem(\"mypagekey\");\n  const navigate = useNavigate();\n  var mytoken = window.localhost.getItem(\"mypagekey\");\n  if (!mytoken) {\n    navigate('/LoginPage');\n    // res.redirect(\"/LoginPage\") ?? backend\n  }\n\n  const [mydata, setMydata] = useState([]);\n  useEffect(() => {\n    const mydataset = async () => {\n      try {\n        // axios 사용\n        const resp = await axios.post(`${process.env.BHOST}/mybook/`,\n        //사용자, 책목록\n        {\n          token: this.mytoken\n        }) // 동작 확인 필요, 토큰을 키값으로 사용자명과 책목록을 불러온다.\n        // const resp = await axios.get('http://localhost:8080/selectbook')\n        // 전체 조회\n        .catch(console.error);\n        setMydata(resp.data);\n        // id 값을 바탕으로 데이터를 가져온다.\n        //\n      } catch (e) {\n        console.log(e);\n      }\n    };\n    mydataset();\n    console.log(mydata);\n    // 템플릿에 정리해야함, useState\n    // 사용자 mydata.user , 읽는책 mydata.bookidData\n  }, []);\n\n  // 사용자 정보를 가져온 후 읽고있는 책 id를 바탕으로 책 정보를 가져와 컴포넌트를 통해 출력해야 한다.\n  // mydata.bookidData[]\n  // 템플릿 레이아웃 확인요\n  // 템플릿에서 컴포넌트 props\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-container\",\n      children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [mydata.userId, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Booklist, {\n      booklist: mydata.bookidData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(MyPage, \"ArAbcbBb9XZ9TqqrZFxz9N3EqAc=\", false, function () {\n  return [useNavigate];\n});\n_c = MyPage;\nexport default MyPage;\nvar _c;\n$RefreshReg$(_c, \"MyPage\");","map":{"version":3,"names":["useState","useEffect","useNavigate","axios","Header","Booklist","jsxDEV","_jsxDEV","MyPage","_s","navigate","mytoken","window","localhost","getItem","mydata","setMydata","mydataset","resp","post","process","env","BHOST","token","catch","console","error","data","e","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","userId","booklist","bookidData","_c","$RefreshReg$"],"sources":["/Users/hongseonghyeon/lab_readbook/2023ict/bprj/src/pages/Mypage/index.jsx"],"sourcesContent":["// localstorage 에 보관된 토큰을 프론트에서 전달받아 DB 조회\n// user, bookId\n// 사용자와 구독한 책 목록(컴포넌트)\n// 반납기능 추가\n//\n\nimport { useState, useEffect } from 'react'\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Header from \"../components/Header\";\nimport Booklist from \"../../components/Booklist\"\n\nconst MyPage = () => {\n\n  // 오류처리 try catch\n  // const mytoken = window.localstorage.getItem(\"mypagekey\");\n  const navigate = useNavigate();\n\n  var mytoken = window.localhost.getItem(\"mypagekey\")\n  if (!mytoken) {\n    navigate('/LoginPage')\n    // res.redirect(\"/LoginPage\") ?? backend\n  }\n\n\n  const [mydata, setMydata] = useState([]);\n\n\n  useEffect(() => {\n    const mydataset = async () => {\n      try {\n        // axios 사용\n        const resp = await axios.post(`${process.env.BHOST}/mybook/`, //사용자, 책목록\n          { token: this.mytoken }) // 동작 확인 필요, 토큰을 키값으로 사용자명과 책목록을 불러온다.\n          // const resp = await axios.get('http://localhost:8080/selectbook')\n          // 전체 조회\n          .catch(console.error)\n        setMydata(resp.data)\n        // id 값을 바탕으로 데이터를 가져온다.\n        //\n\n      } catch (e) {\n        console.log(e);\n      }\n    };\n    mydataset();\n    console.log(mydata);\n    // 템플릿에 정리해야함, useState\n    // 사용자 mydata.user , 읽는책 mydata.bookidData\n\n  }, [])\n\n  // 사용자 정보를 가져온 후 읽고있는 책 id를 바탕으로 책 정보를 가져와 컴포넌트를 통해 출력해야 한다.\n  // mydata.bookidData[]\n  // 템플릿 레이아웃 확인요\n  // 템플릿에서 컴포넌트 props\n\n\n\n\n  return (\n    <div className=\"home-container\">\n      <div className=\"header-container\">\n        <Header />\n      </div>\n\n      <h1>{mydata.userId} </h1>\n\n      <Booklist booklist={mydata.bookidData} />\n\n    </div>\n  )\n}\n\nexport default MyPage;\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,QAAQ,MAAM,2BAA2B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEhD,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAEnB;EACA;EACA,MAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAE9B,IAAIS,OAAO,GAAGC,MAAM,CAACC,SAAS,CAACC,OAAO,CAAC,WAAW,CAAC;EACnD,IAAI,CAACH,OAAO,EAAE;IACZD,QAAQ,CAAC,YAAY,CAAC;IACtB;EACF;;EAGA,MAAM,CAACK,MAAM,EAAEC,SAAS,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAGxCC,SAAS,CAAC,MAAM;IACd,MAAMgB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF;QACA,MAAMC,IAAI,GAAG,MAAMf,KAAK,CAACgB,IAAI,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,KAAM,UAAS;QAAE;QAC5D;UAAEC,KAAK,EAAE,IAAI,CAACZ;QAAQ,CAAC,CAAC,CAAC;QACzB;QACA;QAAA,CACCa,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;QACvBV,SAAS,CAACE,IAAI,CAACS,IAAI,CAAC;QACpB;QACA;MAEF,CAAC,CAAC,OAAOC,CAAC,EAAE;QACVH,OAAO,CAACI,GAAG,CAACD,CAAC,CAAC;MAChB;IACF,CAAC;IACDX,SAAS,CAAC,CAAC;IACXQ,OAAO,CAACI,GAAG,CAACd,MAAM,CAAC;IACnB;IACA;EAEF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA;EACA;EACA;;EAKA,oBACER,OAAA;IAAKuB,SAAS,EAAC,gBAAgB;IAAAC,QAAA,gBAC7BxB,OAAA;MAAKuB,SAAS,EAAC,kBAAkB;MAAAC,QAAA,eAC/BxB,OAAA,CAACH,MAAM;QAAA4B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC,eAEN5B,OAAA;MAAAwB,QAAA,GAAKhB,MAAM,CAACqB,MAAM,EAAC,GAAC;IAAA;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEzB5B,OAAA,CAACF,QAAQ;MAACgC,QAAQ,EAAEtB,MAAM,CAACuB;IAAW;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEtC,CAAC;AAEV,CAAC;AAAA1B,EAAA,CA5DKD,MAAM;EAAA,QAION,WAAW;AAAA;AAAAqC,EAAA,GAJxB/B,MAAM;AA8DZ,eAAeA,MAAM;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}