{"ast":null,"code":"var _jsxFileName = \"/Users/hongseonghyeon/lab_readbook/2023ict/bprj/src/pages/Mypage/index.jsx\",\n  _s = $RefreshSig$();\n// localstorage 에 보관된 토큰을 프론트에서 전달받아 DB 조회\n// user, bookId\n// 사용자와 구독한 책 목록(컴포넌트)\n// 반납기능 추가\n//\n\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Header from \"../../components/Header\";\nimport bdata from \"../Bookintro/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MyPage = () => {\n  _s();\n  // 오류처리 try catch\n  // const mytoken = window.localstorage.getItem(\"mypagekey\");\n  const navigate = useNavigate();\n  var mytoken = window.localhost.getItem(\"mypagekey\");\n  if (!mytoken) {\n    navigate('/LoginPage');\n    // res.redirect(\"/LoginPage\") ?? backend\n  }\n\n  const [mydata, setMydata] = useState([]);\n  useEffect(() => {\n    const mydataset = async () => {\n      try {\n        // axios 사용\n        const resp = await axios.post(`${process.env.BHOST}/mypage/`, {\n          token: this.mytoken\n        })\n        // const resp = await axios.get('http://localhost:8080/selectbook')\n        // 전체 조회\n        .catch(console.error);\n        setMydata(resp.data); // 정상\n      } catch (e) {\n        console.log(e);\n      }\n    };\n    mydataset();\n    console.log(mydata); // 템플릿에 정리해야함, useState\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-container\",\n      children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [bdata.title, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Description\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\uB85C\\uADF8\\uC778\\uD574\\uC57C \\uCC45\\uC744 \\uC77D\\uC744\\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(MyPage, \"ArAbcbBb9XZ9TqqrZFxz9N3EqAc=\", false, function () {\n  return [useNavigate];\n});\n_c = MyPage;\nexport default MyPage;\nvar _c;\n$RefreshReg$(_c, \"MyPage\");","map":{"version":3,"names":["useState","useEffect","useNavigate","axios","Header","bdata","jsxDEV","_jsxDEV","MyPage","_s","navigate","mytoken","window","localhost","getItem","mydata","setMydata","mydataset","resp","post","process","env","BHOST","token","catch","console","error","data","e","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","title","_c","$RefreshReg$"],"sources":["/Users/hongseonghyeon/lab_readbook/2023ict/bprj/src/pages/Mypage/index.jsx"],"sourcesContent":["// localstorage 에 보관된 토큰을 프론트에서 전달받아 DB 조회\n// user, bookId\n// 사용자와 구독한 책 목록(컴포넌트)\n// 반납기능 추가\n//\n\nimport { useState, useEffect } from 'react'\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nimport Header from \"../../components/Header\";\nimport bdata from \"../Bookintro/index\";\n\nconst MyPage = () => {\n\n  // 오류처리 try catch\n  // const mytoken = window.localstorage.getItem(\"mypagekey\");\n  const navigate = useNavigate();\n\n  var mytoken = window.localhost.getItem(\"mypagekey\")\n  if (!mytoken) {\n    navigate('/LoginPage')\n    // res.redirect(\"/LoginPage\") ?? backend\n  }\n\n\n  const [mydata, setMydata] = useState([]);\n\n  useEffect(() => {\n    const mydataset = async () => {\n      try {\n        // axios 사용\n        const resp = await axios.post(`${process.env.BHOST}/mypage/`,\n          { token: this.mytoken })\n          // const resp = await axios.get('http://localhost:8080/selectbook')\n          // 전체 조회\n          .catch(console.error)\n        setMydata(resp.data) // 정상\n      } catch (e) {\n        console.log(e);\n      }\n    };\n    mydataset();\n    console.log(mydata); // 템플릿에 정리해야함, useState\n\n  }, [])\n\n  return (\n    <div className=\"home-container\">\n      <div className=\"header-container\">\n        <Header />\n      </div>\n\n      <h1>{bdata.title} </h1>\n\n      <h2>Description</h2>\n      <p>로그인해야 책을 읽을수 있습니다.</p>\n    </div>\n  )\n}\n\nexport default MyPage;"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAOC,MAAM,MAAM,yBAAyB;AAC5C,OAAOC,KAAK,MAAM,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAEnB;EACA;EACA,MAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAE9B,IAAIS,OAAO,GAAGC,MAAM,CAACC,SAAS,CAACC,OAAO,CAAC,WAAW,CAAC;EACnD,IAAI,CAACH,OAAO,EAAE;IACZD,QAAQ,CAAC,YAAY,CAAC;IACtB;EACF;;EAGA,MAAM,CAACK,MAAM,EAAEC,SAAS,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAExCC,SAAS,CAAC,MAAM;IACd,MAAMgB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF;QACA,MAAMC,IAAI,GAAG,MAAMf,KAAK,CAACgB,IAAI,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,KAAM,UAAS,EAC1D;UAAEC,KAAK,EAAE,IAAI,CAACZ;QAAQ,CAAC;QACvB;QACA;QAAA,CACCa,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;QACvBV,SAAS,CAACE,IAAI,CAACS,IAAI,CAAC,EAAC;MACvB,CAAC,CAAC,OAAOC,CAAC,EAAE;QACVH,OAAO,CAACI,GAAG,CAACD,CAAC,CAAC;MAChB;IACF,CAAC;IACDX,SAAS,CAAC,CAAC;IACXQ,OAAO,CAACI,GAAG,CAACd,MAAM,CAAC,CAAC,CAAC;EAEvB,CAAC,EAAE,EAAE,CAAC;EAEN,oBACER,OAAA;IAAKuB,SAAS,EAAC,gBAAgB;IAAAC,QAAA,gBAC7BxB,OAAA;MAAKuB,SAAS,EAAC,kBAAkB;MAAAC,QAAA,eAC/BxB,OAAA,CAACH,MAAM;QAAA4B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC,eAEN5B,OAAA;MAAAwB,QAAA,GAAK1B,KAAK,CAAC+B,KAAK,EAAC,GAAC;IAAA;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEvB5B,OAAA;MAAAwB,QAAA,EAAI;IAAW;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACpB5B,OAAA;MAAAwB,QAAA,EAAG;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtB,CAAC;AAEV,CAAC;AAAA1B,EAAA,CA9CKD,MAAM;EAAA,QAION,WAAW;AAAA;AAAAmC,EAAA,GAJxB7B,MAAM;AAgDZ,eAAeA,MAAM;AAAC,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}